<Window x:Class="SemiStandard.Simulator.Wpf.StateMachineTimelineWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        mc:Ignorable="d"
        Title="State Machine Timeline Chart: Ping-Pong-Pang"
        Height="800" Width="1400"
        Background="#FF1F2937"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        TextElement.FontWeight="Regular"
        TextElement.FontSize="13"
        TextOptions.TextFormattingMode="Ideal"
        TextOptions.TextRenderingMode="Auto"
        FontFamily="{DynamicResource MaterialDesignFont}">
    
    <Window.Resources>
        <SolidColorBrush x:Key="BackgroundBrush" Color="#FF1F2937"/>
        <SolidColorBrush x:Key="PanelBrush" Color="#FF374151"/>
        <SolidColorBrush x:Key="BorderBrush" Color="#FF4B5563"/>
        <SolidColorBrush x:Key="AccentBrush" Color="#FF06B6D4"/>
        <SolidColorBrush x:Key="SuccessBrush" Color="#FF10B981"/>
        <SolidColorBrush x:Key="WarningBrush" Color="#FFF59E0B"/>
        <SolidColorBrush x:Key="ErrorBrush" Color="#FFEF4444"/>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header & Controls -->
        <Border Grid.Row="0" Background="{StaticResource PanelBrush}" BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,0,0,1">
            <Grid Margin="10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Title -->
                <TextBlock Grid.Column="0" Text="State Machine Timeline Chart: Ping-Pong-Pang" 
                          FontSize="18" FontWeight="Bold" Foreground="{StaticResource AccentBrush}"
                          VerticalAlignment="Center" Margin="0,0,20,0"/>

                <!-- Control Buttons -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right">
                    <!-- Start Button -->
                    <Button x:Name="StartButton" Content="시작" Width="80" Height="35" 
                           Margin="5" Click="StartButton_Click"
                           Background="{StaticResource SuccessBrush}"
                           materialDesign:ButtonAssist.CornerRadius="5"/>
                    
                    <!-- Pause Button -->
                    <Button x:Name="PauseButton" Content="일시정지" Width="80" Height="35"
                           Margin="5" Click="PauseButton_Click" IsEnabled="False"
                           Background="{StaticResource WarningBrush}"
                           materialDesign:ButtonAssist.CornerRadius="5"/>
                    
                    <!-- Reset Button -->
                    <Button x:Name="ResetButton" Content="리셋" Width="80" Height="35"
                           Margin="5" Click="ResetButton_Click"
                           Background="{StaticResource ErrorBrush}"
                           materialDesign:ButtonAssist.CornerRadius="5"/>

                    <Separator Width="1" Margin="10,0" Background="{StaticResource BorderBrush}"/>

                    <!-- Speed Control -->
                    <StackPanel Orientation="Horizontal" Background="#FF2D3748" 
                               VerticalAlignment="Center" Margin="5">
                        <TextBlock Text="재생 속도:" VerticalAlignment="Center" Margin="10,0,5,0" Foreground="White"/>
                        <Slider x:Name="SpeedSlider" Width="120" Minimum="0.1" Maximum="2" Value="1"
                               TickFrequency="0.1" IsSnapToTickEnabled="True"
                               VerticalAlignment="Center" ValueChanged="SpeedSlider_ValueChanged"/>
                        <TextBlock x:Name="SpeedValueText" Text="x1.0" Width="40" 
                                  TextAlignment="Center" VerticalAlignment="Center" 
                                  Margin="5,0,10,0" Foreground="White"/>
                    </StackPanel>

                    <!-- Mode Switch -->
                    <StackPanel Orientation="Horizontal" Background="#FF2D3748" 
                               VerticalAlignment="Center" Margin="5">
                        <TextBlock Text="실시간" VerticalAlignment="Center" Margin="10,0,5,0" Foreground="White"/>
                        <ToggleButton x:Name="ModeSwitch" Width="50" Height="25"
                                     Checked="ModeSwitch_Checked" Unchecked="ModeSwitch_Unchecked"
                                     Style="{StaticResource MaterialDesignSwitchToggleButton}"/>
                        <TextBlock Text="재생" VerticalAlignment="Center" Margin="5,0,10,0" Foreground="White"/>
                    </StackPanel>

                    <!-- Display Mode Switch -->
                    <StackPanel Orientation="Horizontal" Background="#FF2D3748" 
                               VerticalAlignment="Center" Margin="5">
                        <TextBlock Text="Block" VerticalAlignment="Center" Margin="10,0,5,0" Foreground="White"/>
                        <ToggleButton x:Name="DisplayModeSwitch" Width="50" Height="25"
                                     Checked="DisplayModeSwitch_Checked" Unchecked="DisplayModeSwitch_Unchecked"
                                     Style="{StaticResource MaterialDesignSwitchToggleButton}"/>
                        <TextBlock Text="Step" VerticalAlignment="Center" Margin="5,0,10,0" Foreground="White"/>
                    </StackPanel>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content Area -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Hidden"
                     Background="{StaticResource BackgroundBrush}">
            <Grid x:Name="MainContentGrid" Margin="10">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- SM1 Container -->
                <Border Grid.Row="0" Background="#FF374151" CornerRadius="8" Margin="5" Padding="10">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="180"/>
                        </Grid.RowDefinitions>
                        
                        <TextBlock Grid.Row="0" Text="SM1 (Ping)" FontSize="16" FontWeight="Bold" 
                                  Foreground="#FF67E8F9" Margin="0,0,0,10"/>
                        
                        <Grid Grid.Row="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <!-- Lane Labels -->
                            <Grid Grid.Column="0" Background="#FF374151">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>
                                
                                <Border Grid.Row="0" BorderBrush="#FF4B5563" BorderThickness="0,0,1,1">
                                    <TextBlock Text="State" HorizontalAlignment="Center" VerticalAlignment="Center" 
                                              FontWeight="Bold" Foreground="#FF9CA3AF"/>
                                </Border>
                                <Border Grid.Row="1" BorderBrush="#FF4B5563" BorderThickness="0,0,1,1">
                                    <TextBlock Text="Event" HorizontalAlignment="Center" VerticalAlignment="Center" 
                                              FontWeight="Bold" Foreground="#FF9CA3AF"/>
                                </Border>
                                <Border Grid.Row="2" BorderBrush="#FF4B5563" BorderThickness="0,0,1,0">
                                    <TextBlock Text="Action" HorizontalAlignment="Center" VerticalAlignment="Center" 
                                              FontWeight="Bold" Foreground="#FF9CA3AF"/>
                                </Border>
                            </Grid>
                            
                            <!-- Canvas for Timeline -->
                            <Canvas Grid.Column="1" x:Name="SM1Canvas" Background="#FF1F2937" 
                                   ClipToBounds="True" MouseWheel="Canvas_MouseWheel"
                                   MouseLeftButtonDown="Canvas_MouseLeftButtonDown"
                                   MouseMove="Canvas_MouseMove"
                                   MouseLeftButtonUp="Canvas_MouseLeftButtonUp"/>
                        </Grid>
                    </Grid>
                </Border>

                <!-- SM2 Container -->
                <Border Grid.Row="1" Background="#FF374151" CornerRadius="8" Margin="5" Padding="10">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="180"/>
                        </Grid.RowDefinitions>
                        
                        <TextBlock Grid.Row="0" Text="SM2 (Pong)" FontSize="16" FontWeight="Bold" 
                                  Foreground="#FF67E8F9" Margin="0,0,0,10"/>
                        
                        <Grid Grid.Row="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <!-- Lane Labels -->
                            <Grid Grid.Column="0" Background="#FF374151">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>
                                
                                <Border Grid.Row="0" BorderBrush="#FF4B5563" BorderThickness="0,0,1,1">
                                    <TextBlock Text="State" HorizontalAlignment="Center" VerticalAlignment="Center" 
                                              FontWeight="Bold" Foreground="#FF9CA3AF"/>
                                </Border>
                                <Border Grid.Row="1" BorderBrush="#FF4B5563" BorderThickness="0,0,1,1">
                                    <TextBlock Text="Event" HorizontalAlignment="Center" VerticalAlignment="Center" 
                                              FontWeight="Bold" Foreground="#FF9CA3AF"/>
                                </Border>
                                <Border Grid.Row="2" BorderBrush="#FF4B5563" BorderThickness="0,0,1,0">
                                    <TextBlock Text="Action" HorizontalAlignment="Center" VerticalAlignment="Center" 
                                              FontWeight="Bold" Foreground="#FF9CA3AF"/>
                                </Border>
                            </Grid>
                            
                            <!-- Canvas for Timeline -->
                            <Canvas Grid.Column="1" x:Name="SM2Canvas" Background="#FF1F2937" 
                                   ClipToBounds="True" MouseWheel="Canvas_MouseWheel"
                                   MouseLeftButtonDown="Canvas_MouseLeftButtonDown"
                                   MouseMove="Canvas_MouseMove"
                                   MouseLeftButtonUp="Canvas_MouseLeftButtonUp"/>
                        </Grid>
                    </Grid>
                </Border>

                <!-- SM3 Container -->
                <Border Grid.Row="2" Background="#FF374151" CornerRadius="8" Margin="5" Padding="10">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="180"/>
                        </Grid.RowDefinitions>
                        
                        <TextBlock Grid.Row="0" Text="SM3 (Pang)" FontSize="16" FontWeight="Bold" 
                                  Foreground="#FF67E8F9" Margin="0,0,0,10"/>
                        
                        <Grid Grid.Row="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <!-- Lane Labels -->
                            <Grid Grid.Column="0" Background="#FF374151">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>
                                
                                <Border Grid.Row="0" BorderBrush="#FF4B5563" BorderThickness="0,0,1,1">
                                    <TextBlock Text="State" HorizontalAlignment="Center" VerticalAlignment="Center" 
                                              FontWeight="Bold" Foreground="#FF9CA3AF"/>
                                </Border>
                                <Border Grid.Row="1" BorderBrush="#FF4B5563" BorderThickness="0,0,1,1">
                                    <TextBlock Text="Event" HorizontalAlignment="Center" VerticalAlignment="Center" 
                                              FontWeight="Bold" Foreground="#FF9CA3AF"/>
                                </Border>
                                <Border Grid.Row="2" BorderBrush="#FF4B5563" BorderThickness="0,0,1,0">
                                    <TextBlock Text="Action" HorizontalAlignment="Center" VerticalAlignment="Center" 
                                              FontWeight="Bold" Foreground="#FF9CA3AF"/>
                                </Border>
                            </Grid>
                            
                            <!-- Canvas for Timeline -->
                            <Canvas Grid.Column="1" x:Name="SM3Canvas" Background="#FF1F2937" 
                                   ClipToBounds="True" MouseWheel="Canvas_MouseWheel"
                                   MouseLeftButtonDown="Canvas_MouseLeftButtonDown"
                                   MouseMove="Canvas_MouseMove"
                                   MouseLeftButtonUp="Canvas_MouseLeftButtonUp"/>
                        </Grid>
                    </Grid>
                </Border>
            </Grid>
        </ScrollViewer>

        <!-- Status Bar -->
        <Border Grid.Row="2" Background="{StaticResource PanelBrush}" BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,1,0,0">
            <Grid Margin="10,5">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Column="0" x:Name="StatusText" Text="Ready" Foreground="#FF9CA3AF"/>
                <TextBlock Grid.Column="2" x:Name="TimeDisplay" Text="Time: 0.000s" Foreground="#FF9CA3AF"/>
            </Grid>
        </Border>
    </Grid>
</Window>